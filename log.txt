root@servergestao:~/gestao# docker ps
CONTAINER ID   IMAGE                           COMMAND                  CREATED              STATUS                    PORTS                                                                          NAMES
a8509216d9b7   cardapio-backend:latest         "docker-entrypoint.sh"   52 seconds ago       Up 46 seconds (healthy)   3001/tcp                                                                       kicardapio_backend.1.6nwv7yjlthb8cb1z1g6po8exs
891f596c608a   cardapio-admin:latest           "/docker-entrypoint.…"   About a minute ago   Up 56 seconds             80/tcp                                                                         kicardapio_frontend-admin.1.jzh146bfnarxz8ld1ot0f4dek
8fd75e7c48f0   cardapio-client:latest          "/docker-entrypoint.…"   About a minute ago   Up 56 seconds             80/tcp                                                                         kicardapio_frontend-client.1.weykedqkf14m1271ev7i34sfj
f93d37bc50a5   traefik:v3.5.3                  "/entrypoint.sh --ap…"   3 days ago           Up 3 days                 0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   traefik_traefik.1.pg1sahj5mlffrrnlzmmj9wthg
30490cca7c9b   postgres:14                     "docker-entrypoint.s…"   6 days ago           Up 6 days                 5432/tcp                                                                       postgres_postgres.1.sp9aj25m60pzi9jerv9i0stfj
c7b6a1d21fee   portainer/portainer-ce:latest   "/portainer -H tcp:/…"   6 days ago           Up 6 days                 8000/tcp, 9000/tcp, 9443/tcp                                                   portainer_portainer.1.x4kdurh9c9jyxcdhh0c6kdqqq
f993feca46ff   portainer/agent:latest          "./agent"                6 days ago           Up 6 days                                                                                                portainer_agent.2n1ni2q9i7lfthn8xxt1zd5cz.r8i9lovyt115dy952u3ykq2cz
root@servergestao:~/gestao# docker exec -it a8509216d9b7 /bin/sh -c 'export DATABASE_URL=$(cat /run/secrets/db_connection_string) && npx prisma migrate deploy'
Prisma schema loaded from prisma/schema.prisma
Datasource "db": PostgreSQL database "gestao_sistema", schema "public" at "postgres:5432"

30 migrations found in prisma/migrations


No pending migrations to apply.
root@servergestao:~/gestao# docker ps
CONTAINER ID   IMAGE                           COMMAND                  CREATED              STATUS                        PORTS                                                                          NAMES
a8509216d9b7   cardapio-backend:latest         "docker-entrypoint.sh"   About a minute ago   Up About a minute (healthy)   3001/tcp                                                                       kicardapio_backend.1.6nwv7yjlthb8cb1z1g6po8exs
891f596c608a   cardapio-admin:latest           "/docker-entrypoint.…"   2 minutes ago        Up 2 minutes                  80/tcp                                                                         kicardapio_frontend-admin.1.jzh146bfnarxz8ld1ot0f4dek
8fd75e7c48f0   cardapio-client:latest          "/docker-entrypoint.…"   2 minutes ago        Up 2 minutes                  80/tcp                                                                         kicardapio_frontend-client.1.weykedqkf14m1271ev7i34sfj
f93d37bc50a5   traefik:v3.5.3                  "/entrypoint.sh --ap…"   3 days ago           Up 3 days                     0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   traefik_traefik.1.pg1sahj5mlffrrnlzmmj9wthg
30490cca7c9b   postgres:14                     "docker-entrypoint.s…"   6 days ago           Up 6 days                     5432/tcp                                                                       postgres_postgres.1.sp9aj25m60pzi9jerv9i0stfj
c7b6a1d21fee   portainer/portainer-ce:latest   "/portainer -H tcp:/…"   6 days ago           Up 6 days                     8000/tcp, 9000/tcp, 9443/tcp                                                   portainer_portainer.1.x4kdurh9c9jyxcdhh0c6kdqqq
f993feca46ff   portainer/agent:latest          "./agent"                6 days ago           Up 6 days                                                                                                    portainer_agent.2n1ni2q9i7lfthn8xxt1zd5cz.r8i9lovyt115dy952u3ykq2cz
root@servergestao:~/gestao# docker logs a8509216d9b7
Aguardando banco de dados responder em postgresql://postgres:b74996144735db08d6e091f460df4184@postgres:5432/gestao_sistema?schema=public...
Sincronizando Banco de Dados com o Schema...
Prisma schema loaded from prisma/schema.prisma
Datasource "db": PostgreSQL database "gestao_sistema", schema "public" at "postgres:5432"

30 migrations found in prisma/migrations


No pending migrations to apply.
Executando Seed de Permissões...
Aviso: Seed já executado ou falhou silenciosamente.
Iniciando a aplicação...
[dotenv@17.2.3] injecting env (0) from .env -- tip: ⚙️  suppress all logs with { quiet: true }
{"level":"info","message":"Servidor rodando em http://localhost:3001"}
{"level":"error","message":"500 - \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database. - /api/checklists - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/ChecklistController.js:9:24"}
{"level":"error","message":"500 - \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database. - /api/sectors - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/SectorController.js:7:21"}
{"level":"error","message":"500 - \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database. - /api/checklists - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/ChecklistController.js:9:24"}
{"level":"error","message":"500 - \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database. - /api/sectors - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/SectorController.js:7:21"}
root@servergestao:~/gestao# docker stop a8509216d9b7
a8509216d9b7
root@servergestao:~/gestao# docker ps
CONTAINER ID   IMAGE                           COMMAND                  CREATED         STATUS         PORTS                                                                          NAMES
891f596c608a   cardapio-admin:latest           "/docker-entrypoint.…"   2 minutes ago   Up 2 minutes   80/tcp                                                                         kicardapio_frontend-admin.1.jzh146bfnarxz8ld1ot0f4dek
8fd75e7c48f0   cardapio-client:latest          "/docker-entrypoint.…"   2 minutes ago   Up 2 minutes   80/tcp                                                                         kicardapio_frontend-client.1.weykedqkf14m1271ev7i34sfj
f93d37bc50a5   traefik:v3.5.3                  "/entrypoint.sh --ap…"   3 days ago      Up 3 days      0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   traefik_traefik.1.pg1sahj5mlffrrnlzmmj9wthg
30490cca7c9b   postgres:14                     "docker-entrypoint.s…"   6 days ago      Up 6 days      5432/tcp                                                                       postgres_postgres.1.sp9aj25m60pzi9jerv9i0stfj
c7b6a1d21fee   portainer/portainer-ce:latest   "/portainer -H tcp:/…"   6 days ago      Up 6 days      8000/tcp, 9000/tcp, 9443/tcp                                                   portainer_portainer.1.x4kdurh9c9jyxcdhh0c6kdqqq
f993feca46ff   portainer/agent:latest          "./agent"                6 days ago      Up 6 days                                                                                     portainer_agent.2n1ni2q9i7lfthn8xxt1zd5cz.r8i9lovyt115dy952u3ykq2cz
root@servergestao:~/gestao# docker ps
CONTAINER ID   IMAGE                           COMMAND                  CREATED         STATUS                            PORTS                                                                          NAMES
a3c3e344d41c   cardapio-backend:latest         "docker-entrypoint.sh"   7 seconds ago   Up 2 seconds (health: starting)   3001/tcp                                                                       kicardapio_backend.1.2sm0b6ad2ja10fkzb1x8efzhq
891f596c608a   cardapio-admin:latest           "/docker-entrypoint.…"   2 minutes ago   Up 2 minutes                      80/tcp                                                                         kicardapio_frontend-admin.1.jzh146bfnarxz8ld1ot0f4dek
8fd75e7c48f0   cardapio-client:latest          "/docker-entrypoint.…"   2 minutes ago   Up 2 minutes                      80/tcp                                                                         kicardapio_frontend-client.1.weykedqkf14m1271ev7i34sfj
f93d37bc50a5   traefik:v3.5.3                  "/entrypoint.sh --ap…"   3 days ago      Up 3 days                         0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   traefik_traefik.1.pg1sahj5mlffrrnlzmmj9wthg
30490cca7c9b   postgres:14                     "docker-entrypoint.s…"   6 days ago      Up 6 days                         5432/tcp                                                                       postgres_postgres.1.sp9aj25m60pzi9jerv9i0stfj
c7b6a1d21fee   portainer/portainer-ce:latest   "/portainer -H tcp:/…"   6 days ago      Up 6 days                         8000/tcp, 9000/tcp, 9443/tcp                                                   portainer_portainer.1.x4kdurh9c9jyxcdhh0c6kdqqq
f993feca46ff   portainer/agent:latest          "./agent"                6 days ago      Up 6 days                                                                                                        portainer_agent.2n1ni2q9i7lfthn8xxt1zd5cz.r8i9lovyt115dy952u3ykq2cz
root@servergestao:~/gestao# docker exec -it a3c3e344d41c /bin/sh -c 'export DATABASE_URL=$(cat /run/secrets/db_connection_string) && npx prisma migrate deploy'
Prisma schema loaded from prisma/schema.prisma
Datasource "db": PostgreSQL database "gestao_sistema", schema "public" at "postgres:5432"

30 migrations found in prisma/migrations


No pending migrations to apply.
root@servergestao:~/gestao# docker ps
CONTAINER ID   IMAGE                           COMMAND                  CREATED              STATUS                        PORTS                                                                          NAMES
a3c3e344d41c   cardapio-backend:latest         "docker-entrypoint.sh"   About a minute ago   Up About a minute (healthy)   3001/tcp                                                                       kicardapio_backend.1.2sm0b6ad2ja10fkzb1x8efzhq
891f596c608a   cardapio-admin:latest           "/docker-entrypoint.…"   4 minutes ago        Up 4 minutes                  80/tcp                                                                         kicardapio_frontend-admin.1.jzh146bfnarxz8ld1ot0f4dek
8fd75e7c48f0   cardapio-client:latest          "/docker-entrypoint.…"   4 minutes ago        Up 4 minutes                  80/tcp                                                                         kicardapio_frontend-client.1.weykedqkf14m1271ev7i34sfj
f93d37bc50a5   traefik:v3.5.3                  "/entrypoint.sh --ap…"   3 days ago           Up 3 days                     0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   traefik_traefik.1.pg1sahj5mlffrrnlzmmj9wthg
30490cca7c9b   postgres:14                     "docker-entrypoint.s…"   6 days ago           Up 6 days                     5432/tcp                                                                       postgres_postgres.1.sp9aj25m60pzi9jerv9i0stfj
c7b6a1d21fee   portainer/portainer-ce:latest   "/portainer -H tcp:/…"   6 days ago           Up 6 days                     8000/tcp, 9000/tcp, 9443/tcp                                                   portainer_portainer.1.x4kdurh9c9jyxcdhh0c6kdqqq
f993feca46ff   portainer/agent:latest          "./agent"                6 days ago           Up 6 days                                                                                                    portainer_agent.2n1ni2q9i7lfthn8xxt1zd5cz.r8i9lovyt115dy952u3ykq2cz
root@servergestao:~/gestao# docker logs a3c3e344d41c
Aguardando banco de dados responder em postgresql://postgres:b74996144735db08d6e091f460df4184@postgres:5432/gestao_sistema?schema=public...
Sincronizando Banco de Dados com o Schema...
Prisma schema loaded from prisma/schema.prisma
Datasource "db": PostgreSQL database "gestao_sistema", schema "public" at "postgres:5432"

30 migrations found in prisma/migrations


No pending migrations to apply.
Executando Seed de Permissões...
Aviso: Seed já executado ou falhou silenciosamente.
Iniciando a aplicação...
[dotenv@17.2.3] injecting env (0) from .env -- tip: ⚙️  load multiple .env files with { path: ['.env.local', '.env'] }
{"level":"info","message":"Servidor rodando em http://localhost:3001"}
{"level":"error","message":"500 - \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database. - /api/checklists - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/ChecklistController.js:9:24"}
{"level":"error","message":"500 - \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database. - /api/sectors - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/SectorController.js:7:21"}
{"level":"error","message":"500 - \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database. - /api/checklists - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.checklist.findMany()` invocation:\n\n\nThe table `public.Checklist` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/ChecklistController.js:9:24"}
{"level":"error","message":"500 - \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database. - /api/sectors - GET - IP: 10.0.1.202"}
{"level":"error","message":"PrismaClientKnownRequestError: \nInvalid `prisma.sector.findMany()` invocation:\n\n\nThe table `public.Sector` does not exist in the current database.\n    at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7268)\n    at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)\n    at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)\n    at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)\n    at async /app/src/controllers/SectorController.js:7:21"}
root@servergestao:~/gestao#